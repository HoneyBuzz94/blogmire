<div class="navbar-menu mb-5">
  <div class="navbar-end">
    <div class="buttons">
      {{#if logged_in}}
        <a class="button is-primary" href="/dashboard">
          <strong>{{username}}'s Dashboard</strong>
        </a>
        <button id="logout" class="button is-light">
          <strong>Logout</strong>
        </button>
      {{else}}
        <a class="button is-primary" href="/signup">
          <strong>Sign up</strong>
        </a>
        <a class="button is-light" href="/login">
          <strong>Login</strong>
        </a>
      {{/if}}
    </div>
  </div>
</div>

<div class="container">
  {{#if logged_in}}
    {{#each posts as |post|}}
      <div class="box">
        <div class="card-content">
          <div class="media">
            <div class="media-content">
              <p class="title is-4">{{post.title}}</p>
              <p class="subtitle is-6">{{post.user.username}} | <em>{{post.createdAt}}</em></p>
            </div>
          </div>
          <div class="content mt-3">
            {{post.text}}
          </div>
        </div>
        {{#each post.comments as |comment|}}
          <div>
            <div class="box mb-2 has-background-warning-light">
              {{comment.text}}
              <p class="subtitle is-6"><em>{{comment.user.username}}</em></p>
            </div>
          </div>
        {{/each}}
        <form>
          <input
            id='comment-{{post.id}}'
            name="comment"
            class="input mb-2"
            type="text"
            placeholder="Leave a comment"
          />
          <button class="comment-btn button is-info">Comment</button>
        </form>
      </div>
    {{/each}}
  {{else}}
    <h2 class="subtitle is-3 has-text-centered">Login to see the latest posts on Blogmire</h2>
  {{/if}}
</div>

<script src="/js/logout.js"></script>
<script src="/js/createComment.js"></script>